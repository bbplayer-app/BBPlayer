# 共享歌单与协同编辑

BBPlayer 提供了强大的共享歌单与协同编辑功能，让你可以与朋友一起分享和管理音乐。

## 开启共享

如果你想将自己的本地歌单分享给其他人，可以开启歌单共享功能。

1. 在歌单详情页，点击菜单中的“开启共享”选项。
2. **身份验证**：为了防止滥用，开启共享需要验证你的身份。系统会上传你的 Bilibili Cookie 以确认你是真实用户（BBPlayer 完全开源，你可以随时审计相关代码）。
3. **获取链接**：开启成功后，你将获得两种链接：
   - **订阅链接（只读）**：发给朋友后，对方可以订阅并收听此歌单，但不能修改。
   - **协作编辑邀请链接**：包含特殊的邀请码，通过此链接订阅的朋友将获得编辑权限，可以与你一起添加、删除或排序歌曲。
4. **重置邀请码**：如果邀请码泄露，你可以随时点击“重置协作编辑邀请链接”生成新的邀请码。

> **注意**：目前版本中，歌单一旦开启共享便无法撤销，请谨慎操作。

## 订阅共享歌单

你可以通过朋友分享的链接来订阅他们的歌单。

1. 在“我的”页面或歌单列表，选择“订阅共享歌单”。
2. 粘贴对方分享的链接或歌单 ID（UUID 格式）。
3. 如果链接中包含编辑者邀请码，系统会自动填充；你也可以手动输入邀请码以获取编辑权限。
4. 点击“订阅”前，你可以预览歌单的基本信息（如创建者、歌曲数量）以及前 30 首歌曲。
5. 确认无误后，点击“订阅共享歌单”即可将其添加到你的库中。

## 角色与权限

共享歌单中有三种不同的角色，对应不同的权限：

- **创建者 (Owner)**：拥有最高权限。可以修改歌单信息（标题、描述、封面）、添加/删除/排序歌曲、以及重置编辑者邀请码。
- **编辑者 (Editor)**：通过协作邀请链接加入的用户。可以添加、删除和重新排序歌曲，但不能修改歌单的基本信息。
- **订阅者 (Subscriber)**：通过普通订阅链接加入的用户。仅具有只读权限，可以同步和播放歌单中的歌曲，无法进行任何修改。

## 同步与冲突处理

- **多端同步**：共享歌单的更改（如添加新歌、删除歌曲、调整顺序）会自动同步到云端。其他订阅者在刷新或触发同步时，会获取到最新的歌单内容。
- **离线支持**：你可以将共享歌单中的歌曲下载到本地，即使在没有网络的情况下也能正常播放。
- **冲突处理**：在多人同时编辑歌单时，BBPlayer 后端采用了 **LWW (Last-Writer-Wins，最后写入者胜)** 策略来解决冲突，确保歌单状态的一致性。
